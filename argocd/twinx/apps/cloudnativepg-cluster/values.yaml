# 파일 경로: argocd/twinx/apps/cloudnativepg-cluster/values.yaml

# -- Override the name of the chart
nameOverride: ""
# -- Override the full name of the chart
fullnameOverride: ""
# -- Override the namespace of the chart
namespaceOverride: ""

###
# -- Type of the CNPG database.
type: postgresql

version:
  postgresql: "16"
  timescaledb: "2.15"
  postgis: "3.4"

###
# -- Cluster mode of operation.
mode: standalone

recovery: {}

cluster:
  instances: 1

  storage:
    size: 10Gi
    storageClass: "rook-ceph-block"

  walStorage:
    enabled: false

  resources:
    limits:
      cpu: "1"
      memory: "1Gi"
    requests:
      cpu: "250m"
      memory: "512Mi"

  # LoadBalancer 설정 (이전 오류 해결)
  services:
    primary:
      type: LoadBalancer

  enableSuperuserAccess: true
  superuserSecret: ""

  enablePDB: false

  # Declarative Role Management
  roles:
    - name: nessie_prod_user
      ensure: present
      login: true
      superuser: false

  # BootstrapInitDB configuration
  initdb:
    database: nessiedb
    owner: nessie_user
    # secret 필드를 제거하여 CNPG가 Secret을 자동으로 생성하도록 함.
    # secret: ""  <-- 이 줄이 오류를 유발했으므로 제거됨

# ... (나머지 필드는 변경 없음)
backups:
  enabled: false

poolers: []

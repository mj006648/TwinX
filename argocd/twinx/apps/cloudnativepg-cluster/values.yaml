# 파일 경로: argocd/twinx/apps/cloudnativepg-cluster/values.yaml

# 최상위 키: 0칸 들여쓰기
nameOverride: ""
fullnameOverride: ""
namespaceOverride: ""

###
# -- Type of the CNPG database.
type: postgresql

version:
  # version 하위 키: 2칸 들여쓰기
  postgresql: "16" 
  timescaledb: "2.15"
  postgis: "3.4"

###
# -- Cluster mode of operation.
mode: standalone

recovery: {}


# -- 클러스터 기본 설정
cluster:
  # cluster 하위 키: 2칸 들여쓰기
  instances: 1

  # storage 하위 키: 4칸 들여쓰기
  storage:
    size: 10Gi
    storageClass: "rook-ceph-block"

  walStorage:
    enabled: false
    # size: 1Gi
    # storageClass: ""

  resources:
    limits:
      cpu: "1"
      memory: "1Gi"
    requests:
      cpu: "250m"
      memory: "512Mi"

  # services는 객체(mapping)이므로 하위 키는 4칸 들여쓰기
  services:
    # primary는 services의 하위 키 (4칸 들여쓰기)
    primary:
      # type은 primary의 하위 키 (6칸 들여쓰기)
      type: LoadBalancer

  enableSuperuserAccess: true
  superuserSecret: "" 

  enablePDB: false

  # roles는 배열(list)이므로 - 로 시작하고 하위 키는 4칸 들여쓰기
  roles:
    # 배열 항목: - 로 시작하고 2칸 들여쓰기
    - name: nessie_prod_user 
      # name, ensure 등은 - 항목의 하위 키: 4칸 들여쓰기
      ensure: present
      login: true
      superuser: false

  # initdb는 객체(mapping)이므로 하위 키는 4칸 들여쓰기
  initdb:
    database: nessiedb
    owner: nessie_user 
    secret: ""

# -- 백업 설정 (최상위 키)
backups:
  enabled: false

# -- PgBouncer (최상위 키)
poolers: []

# ./argocd/twinx/apps/ovas/03-core-services/applications-ui/values.yaml

# global ì„¹ì…˜ì—ëŠ” ë‹¤ë¥¸ ì•±ë“¤ê³¼ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì„¤ì •ë§Œ ë‚¨ê¹ë‹ˆë‹¤.
# ingress.annotationsëŠ” applications ì„¹ì…˜ìœ¼ë¡œ ì´ë™í–ˆìœ¼ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ì œê±°í•©ë‹ˆë‹¤.
global:
  # ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì‹œí¬ë¦¿ì€ ëª¨ë“  OVAS ì•±ì´ ì‚¬ìš©í•˜ë¯€ë¡œ ì—¬ê¸°ì— ë‘¡ë‹ˆë‹¤.
  imagePullSecrets:
   - name: regcred

applications:
  ingress:
    # =======================================================================
    # ğŸš¨ ì—¬ê¸°ì— 'annotations' ë¸”ë¡ì„ ìƒˆë¡œ ë§Œë“¤ì–´ ëª¨ë“  ê´€ë ¨ ì„¤ì •ì„ ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.
    # ì´ë ‡ê²Œ í•´ì•¼ applications-ui Ingressì— CORS ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë©ë‹ˆë‹¤.
    annotations:
      # Ingress Controllerë¥¼ NGINXë¡œ ì§€ì •
      kubernetes.io/ingress.class: "nginx"
      
      # CORS (Cross-Origin Request Blocked) ì˜¤ë¥˜ í•´ê²°ì„ ìœ„í•œ ì„¤ì •
      nginx.ingress.kubernetes.io/enable-cors: "true"
      nginx.ingress.kubernetes.io/cors-allow-origin: "*"
      nginx.ingress.kubernetes.io/cors-allow-methods: "GET, POST, OPTIONS, PUT, DELETE"
      nginx.ingress.kubernetes.io/cors-allow-headers: "Content-Type, Authorization"

      # ê¸°íƒ€ NGINX ê´€ë ¨ ì„¤ì •
      nginx.ingress.kubernetes.io/proxy-body-size: "0"
      nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
      nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
    # =======================================================================

    # OVASì˜ ê¸°ë³¸ API ê²½ë¡œ
    path: "/cfg/apps"
    pathType: Prefix
    enabled: true

  serviceConfig:
    root_path: ""
    # ìœ„ ingress.pathì™€ ì´ prefix_urlì´ ì¼ì¹˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    prefix_url: "cfg/apps"

  image:
    repository: "nvcr.io/nvidia/omniverse/kit-appstreaming-applications"
    pullPolicy: Always
    tag: 1.10.1

  applications: {}
  profiles: {}

  monitoring:
    enabled: false
    prometheusNamespace: "monitoring"

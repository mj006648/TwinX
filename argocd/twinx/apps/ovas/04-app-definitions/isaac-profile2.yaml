apiVersion: omniverse.nvidia.com/v1
kind: ApplicationProfile
metadata:
  name: default
spec:
  name: Default profile
  description: Updated memory and CPU settings.
  supportedApplications:
    - name: "isaac-sim"
      versions: 
        - "*"
  chartMappings:
    container: ich6648/ovas-isaac-sim
    container_version: '9.0.0'
    name: streamingKit.name
  chartValues:
    global:
      imagePullSecrets:
        - name: changcred
        - name: regcred
    streamingKit:
      image:
        repository: ich6648/ovas-isaac-sim
        pullPolicy: Always
        tag: '9.0.0'
      env:
        - name: ACCEPT_EULA
          value: "Y"
        - name: PRIVACY_CONSENT
          value: "Y"
        - name: OMNI_SERVER
          value: "omniverse://10.38.38.32"
        - name: OMNI_USER
          value: "admin"
        - name: OMNI_PASS
          value: "0070"
        - name: OMNI_KIT_ALLOW_ROOT
          value: "1"

      args:
        - "--headless"
        - "--/exts/omni.kit.livestream.app/primaryStream/streamType=webrtc"
        - "--/exts/omni.kit.livestream.app/primaryStream/allowDynamicResize=false"
        - "--/exts/omni.kit.livestream.app/primaryStream/targetFps=60"
        - "--/exts/omni.kit.livestream.app/primaryStream/signalPort=49100"
        - "--/exts/omni.kit.livestream.app/primaryStream/streamPort=1024"

      sessionId: session_id
      name: kit-test
      resources:
        requests:
          nvidia.com/gpu: "1"
        limits:
          cpu: "12"
          memory: "48Gi"
          nvidia.com/gpu: "1"
